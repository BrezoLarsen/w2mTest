<div class="wrapper" *ngIf="showLoading; else formDiv">
  <mat-spinner></mat-spinner>
</div>

<div class="container">

  <ng-template #formDiv>
    <h2>{{ title }}</h2>
    <form *ngIf="heroForm" [formGroup]="heroForm">
      <fieldset class="form">
        <legend class="form__legend">Formulario:</legend>
        <mat-form-field class="form__field">
          <mat-label>Nombre de Súper Héroe:</mat-label>
          <input
            formControlName="superhero" matInput type="text">
          <mat-error *ngIf="isValid('superhero')">
            Un buen nombre de héroe debe tener por lo menos 3 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form__field">
          <mat-label>Álter ego:</mat-label>
          <input
            formControlName="alterEgo" matInput type="text">
          <mat-error *ngIf="isValid('alterEgo')">
            Campo requerido
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form__field">
          <mat-label>Primera aparición:</mat-label>
          <input
            formControlName="firstAppearance" matInput type="text">
          <mat-error *ngIf="isValid('firstAppearance')">
            Campo requerido
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form__field">
          <mat-label>Personajes:</mat-label>
          <input
            formControlName="characters" matInput type="text">
          <mat-error *ngIf="isValid('characters')">
            Campo requerido
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Editorial:</mat-label>
          <mat-select formControlName="publisher" ngDefaultControl>
            <mat-option *ngFor="let publisher of publishers" [value]="publisher.id">
              {{publisher.id}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </fieldset>

      <br>

      <div class="form__buttons">
        <button mat-flat-button color="accent" (click)="save()" [disabled]="heroForm.invalid">
          <mat-icon>save</mat-icon> Guardar
        </button>
        <button mat-flat-button color="warn" (click)="openConfirmDialog()">
          <mat-icon>remove</mat-icon> Borrar
        </button>
      </div>
    </form>
    <button class="custom-button" mat-button (click)="goToListPage()">Volver</button>

    <div class="error" *ngIf="serverError">Ha ocurrido un error, comprueba la conexión al servidor</div>

  </ng-template>
</div>
